<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Scanner Manager</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.min.js"></script>
    <style>
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #1f2937;
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }
        .toast.show {
            transform: translateX(0);
        }
        .toast.error {
            background: #dc2626;
        }
        .download-progress {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            z-index: 2000;
            min-width: 300px;
            text-align: center;
        }
        .upload-area {
            transition: all 0.3s ease;
        }
        .upload-area.has-file {
            background: linear-gradient(135deg, #10b981, #059669);
            border-color: #059669;
            color: white;
        }
        .upload-area.has-file .upload-icon {
            color: white;
        }
        .upload-area.has-file .upload-text {
            color: white;
        }
        .btn-enabled {
            background-color: #7c3aed !important;
            cursor: pointer !important;
        }
        .btn-enabled:hover {
            background-color: #6d28d9 !important;
        }
        .btn-disabled {
            background-color: #d1d5db !important;
            cursor: not-allowed !important;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto p-6 max-w-6xl">
        <!-- Header -->
        <div class="flex items-center justify-between mb-6">
            <div>
                <h1 class="text-3xl font-bold text-gray-900">Book Scanner Manager</h1>
                <p class="text-gray-600">Manage your Epson V600 book scans with proper naming conventions</p>
            </div>
            <div class="flex gap-2">
                <button onclick="downloadAllImages()" class="flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold text-lg shadow-lg">
                    <i data-lucide="download" class="w-5 h-5"></i>
                    Download All Images
                </button>
                <button onclick="exportData()" class="flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                    <i data-lucide="file-text" class="w-4 h-4"></i>
                    Export Data
                </button>
                <span id="bookCount" class="px-3 py-1 bg-gray-200 text-gray-700 rounded-full text-sm">0 books scanned</span>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Input Form -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                <div class="p-6 border-b border-gray-200">
                    <h2 class="text-xl font-semibold flex items-center gap-2">
                        <i data-lucide="book-open" class="w-5 h-5"></i>
                        <span id="formTitle">Add New Book Scan</span>
                    </h2>
                </div>
                <div class="p-6 space-y-4">
                    <div class="space-y-2">
                        <label for="title" class="block text-sm font-medium text-gray-700">Title *</label>
                        <input 
                            type="text" 
                            id="title" 
                            placeholder="Enter book title"
                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                        >
                    </div>

                    <div class="space-y-2">
                        <label for="issue" class="block text-sm font-medium text-gray-700">Issue</label>
                        <input 
                            type="text" 
                            id="issue" 
                            placeholder="Enter issue number/name"
                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                        >
                    </div>

                    <div class="space-y-2">
                        <label for="condition" class="block text-sm font-medium text-gray-700">Condition</label>
                        <input 
                            type="text" 
                            id="condition" 
                            placeholder="Enter condition"
                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                        >
                    </div>

                    <div class="space-y-2">
                        <label for="note" class="block text-sm font-medium text-gray-700">Note</label>
                        <textarea 
                            id="note" 
                            placeholder="Additional notes"
                            rows="3"
                            class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                        ></textarea>
                    </div>

                    <hr class="my-6">

                    <!-- Image Upload Section -->
                    <div class="grid grid-cols-2 gap-4">
                        <!-- Front Cover -->
                        <div class="space-y-2">
                            <label class="block text-sm font-medium text-gray-700">Front Cover Scan</label>
                            <div id="frontUploadArea" class="upload-area border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:border-gray-400 transition-colors" onclick="document.getElementById('frontInput').click()">
                                <div id="frontPreview" class="hidden">
                                    <img id="frontImage" class="w-full h-32 object-cover rounded mb-2">
                                    <p class="text-xs upload-text">Front cover uploaded ✓</p>
                                </div>
                                <div id="frontPlaceholder" class="space-y-2">
                                    <i data-lucide="image" class="upload-icon w-8 h-8 mx-auto text-gray-400"></i>
                                    <p class="text-sm upload-text text-gray-500">Click to upload front cover</p>
                                </div>
                                <input type="file" id="frontInput" accept="image/*" class="hidden">
                            </div>
                        </div>

                        <!-- Back Cover -->
                        <div class="space-y-2">
                            <label class="block text-sm font-medium text-gray-700">Back Cover Scan</label>
                            <div id="backUploadArea" class="upload-area border-2 border-dashed border-gray-300 rounded-lg p-4 text-center cursor-pointer hover:border-gray-400 transition-colors" onclick="document.getElementById('backInput').click()">
                                <div id="backPreview" class="hidden">
                                    <img id="backImage" class="w-full h-32 object-cover rounded mb-2">
                                    <p class="text-xs upload-text">Back cover uploaded ✓</p>
                                </div>
                                <div id="backPlaceholder" class="space-y-2">
                                    <i data-lucide="image" class="upload-icon w-8 h-8 mx-auto text-gray-400"></i>
                                    <p class="text-sm upload-text text-gray-500">Click to upload back cover</p>
                                </div>
                                <input type="file" id="backInput" accept="image/*" class="hidden">
                            </div>
                        </div>
                    </div>

                    <!-- Big Download Button -->
                    <div class="pt-4">
                        <button 
                            id="downloadCurrentButton" 
                            onclick="downloadCurrentImages()" 
                            class="w-full text-white px-6 py-4 rounded-lg font-semibold text-lg flex items-center justify-center gap-3 shadow-lg transition-all btn-disabled"
                        >
                            <i data-lucide="download" class="w-6 h-6"></i>
                            Download Images with Generated Names
                        </button>
                        <p id="downloadButtonStatus" class="text-xs text-gray-500 mt-2 text-center">Upload images and enter a title to enable download</p>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex gap-2 pt-4">
                        <button onclick="saveBook()" class="flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                            <span id="saveButtonText">Save Book</span>
                        </button>
                        <button onclick="resetForm()" class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                            Clear
                        </button>
                        <button id="cancelButton" onclick="resetForm()" class="hidden px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                            Cancel
                        </button>
                    </div>

                    <!-- Filename Preview -->
                    <div id="filenamePreview" class="hidden text-xs text-gray-500 space-y-1 bg-gray-50 p-3 rounded">
                        <p><strong>Generated filenames:</strong></p>
                        <p id="frontFilename" class="font-mono"></p>
                        <p id="backFilename" class="font-mono"></p>
                    </div>
                </div>
            </div>

            <!-- Book List -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                <div class="p-6 border-b border-gray-200">
                    <h2 class="text-xl font-semibold">Scanned Books</h2>
                </div>
                <div class="p-6">
                    <div id="bookList" class="space-y-4 max-h-96 overflow-y-auto">
                        <!-- Empty state -->
                        <div id="emptyState" class="text-center py-8 text-gray-500">
                            <i data-lucide="book-open" class="w-12 h-12 mx-auto mb-4 opacity-50"></i>
                            <p>No books scanned yet</p>
                            <p class="text-sm">Add your first book scan to get started</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer"></div>

    <!-- Download Progress Modal -->
    <div id="downloadProgress" class="download-progress hidden">
        <div class="flex items-center gap-3 mb-4">
            <i data-lucide="download" class="w-6 h-6 text-blue-600"></i>
            <h3 class="text-lg font-semibold">Downloading Images...</h3>
        </div>
        <div class="bg-gray-200 rounded-full h-2 mb-4">
            <div id="progressBar" class="bg-blue-600 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
        </div>
        <p id="progressText" class="text-sm text-gray-600">Preparing download...</p>
    </div>

    <script>
        let books = JSON.parse(localStorage.getItem('scannedBooks') || '[]');
        let currentEditId = null;
        let frontImageFile = null;
        let backImageFile = null;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons();
            renderBookList();
            updateBookCount();
            setupEventListeners();
            updateDownloadButtonState(); // Initialize button state
        });

        function setupEventListeners() {
            // All input fields for filename preview and download button state
            ['title', 'issue', 'condition', 'note'].forEach(fieldId => {
                document.getElementById(fieldId).addEventListener('input', function() {
                    updateFilenamePreview();
                    updateDownloadButtonState();
                });
            });

            // Image upload handlers
            document.getElementById('frontInput').addEventListener('change', function(e) {
                handleImageUpload(e.target.files[0], 'front');
            });

            document.getElementById('backInput').addEventListener('change', function(e) {
                handleImageUpload(e.target.files[0], 'back');
            });
        }

        function generateFileName(book, side) {
            const fields = [];
            
            if (book.title && book.title.trim()) fields.push(book.title.trim());
            if (book.issue && book.issue.trim()) fields.push(book.issue.trim());
            if (book.condition && book.condition.trim()) fields.push(book.condition.trim());
            if (book.note && book.note.trim()) fields.push(book.note.trim());
            
            const combinedFields = fields.join(' ').toLowerCase()
                .replace(/[^a-z0-9\s]/g, '')
                .replace(/\s+/g, '_')
                .substring(0, 80);
            
            return `${combinedFields}_{${side.toUpperCase()}}`;
        }

        function updateFilenamePreview() {
            const currentBook = {
                title: document.getElementById('title').value,
                issue: document.getElementById('issue').value,
                condition: document.getElementById('condition').value,
                note: document.getElementById('note').value
            };
            
            const preview = document.getElementById('filenamePreview');
            
            if (currentBook.title.trim()) {
                document.getElementById('frontFilename').textContent = `Front: ${generateFileName(currentBook, 'front')}.jpg`;
                document.getElementById('backFilename').textContent = `Back: ${generateFileName(currentBook, 'back')}.jpg`;
                preview.classList.remove('hidden');
            } else {
                preview.classList.add('hidden');
            }
        }

        function updateDownloadButtonState() {
            const title = document.getElementById('title').value.trim();
            const hasImages = frontImageFile || backImageFile;
            const downloadButton = document.getElementById('downloadCurrentButton');
            const statusText = document.getElementById('downloadButtonStatus');
            
            console.log('Updating button state:', { title, hasImages, frontImageFile, backImageFile }); // Debug log
            
            if (title && hasImages) {
                downloadButton.disabled = false;
                downloadButton.classList.remove('btn-disabled');
                downloadButton.classList.add('btn-enabled');
                statusText.textContent = 'Ready to download!';
                statusText.classList.remove('text-gray-500');
                statusText.classList.add('text-green-600');
            } else {
                downloadButton.disabled = true;
                downloadButton.classList.remove('btn-enabled');
                downloadButton.classList.add('btn-disabled');
                
                if (!title && !hasImages) {
                    statusText.textContent = 'Upload images and enter a title to enable download';
                } else if (!title) {
                    statusText.textContent = 'Enter a title to enable download';
                } else if (!hasImages) {
                    statusText.textContent = 'Upload at least one image to enable download';
                }
                statusText.classList.remove('text-green-600');
                statusText.classList.add('text-gray-500');
            }
        }

        function handleImageUpload(file, side) {
            if (!file || !file.type.startsWith('image/')) {
                showToast('Please upload an image file', 'error');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                const preview = document.getElementById(`${side}Preview`);
                const placeholder = document.getElementById(`${side}Placeholder`);
                const image = document.getElementById(`${side}Image`);
                const uploadArea = document.getElementById(`${side}UploadArea`);
                
                image.src = e.target.result;
                preview.classList.remove('hidden');
                placeholder.classList.add('hidden');
                
                // Add green styling to show file is uploaded
                uploadArea.classList.add('has-file');
                
                if (side === 'front') {
                    frontImageFile = file;
                } else {
                    backImageFile = file;
                }
                
                console.log('Image uploaded:', side, file.name); // Debug log
                updateDownloadButtonState();
            };
            reader.readAsDataURL(file);
        }

        function downloadCurrentImages() {
            const currentBook = {
                title: document.getElementById('title').value,
                issue: document.getElementById('issue').value,
                condition: document.getElementById('condition').value,
                note: document.getElementById('note').value
            };

            if (!currentBook.title.trim()) {
                showToast('Please enter a title first', 'error');
                return;
            }

            if (!frontImageFile && !backImageFile) {
                showToast('Please upload at least one image', 'error');
                return;
            }

            const downloadFile = (file, filename) => {
                const url = URL.createObjectURL(file);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            };

            let downloadCount = 0;

            if (frontImageFile) {
                const frontFilename = `${generateFileName(currentBook, 'front')}.jpg`;
                downloadFile(frontImageFile, frontFilename);
                downloadCount++;
            }

            if (backImageFile) {
                const backFilename = `${generateFileName(currentBook, 'back')}.jpg`;
                downloadFile(backImageFile, backFilename);
                downloadCount++;
            }

            showToast(`Downloaded ${downloadCount} image(s) with generated filenames!`);
        }

        function saveBook() {
            const title = document.getElementById('title').value.trim();
            if (!title) {
                showToast('Please enter a book title', 'error');
                return;
            }

            const bookData = {
                id: currentEditId || Date.now().toString(),
                title: title,
                issue: document.getElementById('issue').value,
                condition: document.getElementById('condition').value,
                note: document.getElementById('note').value,
                frontImage: frontImageFile,
                backImage: backImageFile,
                createdAt: new Date().toISOString()
            };

            if (currentEditId) {
                const index = books.findIndex(book => book.id === currentEditId);
                books[index] = bookData;
                showToast('Book updated successfully');
            } else {
                books.push(bookData);
                showToast('Book saved successfully');
            }

            localStorage.setItem('scannedBooks', JSON.stringify(books));
            renderBookList();
            updateBookCount();
        }

        function resetForm() {
            document.getElementById('title').value = '';
            document.getElementById('issue').value = '';
            document.getElementById('condition').value = '';
            document.getElementById('note').value = '';
            
            // Reset image uploads
            document.getElementById('frontInput').value = '';
            document.getElementById('backInput').value = '';
            document.getElementById('frontPreview').classList.add('hidden');
            document.getElementById('backPreview').classList.add('hidden');
            document.getElementById('frontPlaceholder').classList.remove('hidden');
            document.getElementById('backPlaceholder').classList.remove('hidden');
            
            // Reset upload area styling
            document.getElementById('frontUploadArea').classList.remove('has-file');
            document.getElementById('backUploadArea').classList.remove('has-file');
            
            frontImageFile = null;
            backImageFile = null;
            currentEditId = null;
            
            document.getElementById('formTitle').textContent = 'Add New Book Scan';
            document.getElementById('saveButtonText').textContent = 'Save Book';
            document.getElementById('cancelButton').classList.add('hidden');
            document.getElementById('filenamePreview').classList.add('hidden');
            
            updateDownloadButtonState();
        }

        function editBook(id) {
            const book = books.find(b => b.id === id);
            if (!book) return;

            currentEditId = id;
            document.getElementById('title').value = book.title;
            document.getElementById('issue').value = book.issue || '';
            document.getElementById('condition').value = book.condition || '';
            document.getElementById('note').value = book.note || '';
            
            frontImageFile = book.frontImage;
            backImageFile = book.backImage;
            
            // Update upload areas if images exist
            if (book.frontImage) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('frontImage').src = e.target.result;
                    document.getElementById('frontPreview').classList.remove('hidden');
                    document.getElementById('frontPlaceholder').classList.add('hidden');
                    document.getElementById('frontUploadArea').classList.add('has-file');
                };
                reader.readAsDataURL(book.frontImage);
            }
            
            if (book.backImage) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('backImage').src = e.target.result;
                    document.getElementById('backPreview').classList.remove('hidden');
                    document.getElementById('backPlaceholder').classList.add('hidden');
                    document.getElementById('backUploadArea').classList.add('has-file');
                };
                reader.readAsDataURL(book.backImage);
            }
            
            document.getElementById('formTitle').textContent = 'Edit Book Scan';
            document.getElementById('saveButtonText').textContent = 'Update Book';
            document.getElementById('cancelButton').classList.remove('hidden');
            
            updateFilenamePreview();
            updateDownloadButtonState();
        }

        function deleteBook(id) {
            if (confirm('Are you sure you want to delete this book scan?')) {
                books = books.filter(book => book.id !== id);
                localStorage.setItem('scannedBooks', JSON.stringify(books));
                renderBookList();
                updateBookCount();
                showToast('Book deleted');
            }
        }

        function downloadImages(id) {
            const book = books.find(b => b.id === id);
            if (!book) return;

            const downloadFile = (file, filename) => {
                const url = URL.createObjectURL(file);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            };

            if (book.frontImage) {
                const frontFilename = `${generateFileName(book, 'front')}.jpg`;
                downloadFile(book.frontImage, frontFilename);
            }

            if (book.backImage) {
                const backFilename = `${generateFileName(book, 'back')}.jpg`;
                downloadFile(book.backImage, backFilename);
            }

            showToast('Images downloaded with proper naming');
        }

        async function downloadAllImages() {
            const booksWithImages = books.filter(book => book.frontImage || book.backImage);
            
            if (booksWithImages.length === 0) {
                showToast('No images to download', 'error');
                return;
            }

            // Show progress modal
            const progressModal = document.getElementById('downloadProgress');
            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressText');
            
            progressModal.classList.remove('hidden');
            
            let totalImages = 0;
            let downloadedImages = 0;
            
            // Count total images
            booksWithImages.forEach(book => {
                if (book.frontImage) totalImages++;
                if (book.backImage) totalImages++;
            });

            const downloadFile = (file, filename) => {
                return new Promise((resolve) => {
                    const url = URL.createObjectURL(file);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = filename;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                    
                    // Small delay to prevent browser blocking
                    setTimeout(resolve, 100);
                });
            };

            // Download all images with progress
            for (const book of booksWithImages) {
                if (book.frontImage) {
                    const frontFilename = `${generateFileName(book, 'front')}.jpg`;
                    await downloadFile(book.frontImage, frontFilename);
                    downloadedImages++;
                    
                    const progress = (downloadedImages / totalImages) * 100;
                    progressBar.style.width = `${progress}%`;
                    progressText.textContent = `Downloaded ${downloadedImages} of ${totalImages} images...`;
                }

                if (book.backImage) {
                    const backFilename = `${generateFileName(book, 'back')}.jpg`;
                    await downloadFile(book.backImage, backFilename);
                    downloadedImages++;
                    
                    const progress = (downloadedImages / totalImages) * 100;
                    progressBar.style.width = `${progress}%`;
                    progressText.textContent = `Downloaded ${downloadedImages} of ${totalImages} images...`;
                }
            }

            // Complete
            progressText.textContent = `Complete! Downloaded ${totalImages} images with proper filenames.`;
            
            setTimeout(() => {
                progressModal.classList.add('hidden');
                showToast(`Successfully downloaded ${totalImages} images!`);
            }, 1500);
        }

        function exportData() {
            const exportData = books.map(book => ({
                id: book.id,
                title: book.title,
                issue: book.issue,
                condition: book.condition,
                note: book.note,
                createdAt: book.createdAt,
                frontImageName: book.frontImage ? `${generateFileName(book, 'front')}.jpg` : null,
                backImageName: book.backImage ? `${generateFileName(book, 'back')}.jpg` : null
            }));

            const dataStr = JSON.stringify(exportData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `book_scans_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            showToast('Data exported to JSON');
        }

        function renderBookList() {
            const bookList = document.getElementById('bookList');
            const emptyState = document.getElementById('emptyState');

            if (books.length === 0) {
                emptyState.classList.remove('hidden');
                return;
            }

            emptyState.classList.add('hidden');
            
            bookList.innerHTML = books.map(book => `
                <div class="bg-white border border-gray-200 rounded-lg p-4">
                    <div class="flex items-start justify-between">
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900">${book.title}</h3>
                            ${book.issue ? `<p class="text-sm text-gray-600">Issue: ${book.issue}</p>` : ''}
                            ${book.condition ? `<p class="text-xs text-gray-500">Condition: ${book.condition}</p>` : ''}
                            <div class="flex gap-2 mt-2">
                                ${book.frontImage ? '<span class="px-2 py-1 bg-green-100 text-green-700 rounded text-xs">Front scan</span>' : ''}
                                ${book.backImage ? '<span class="px-2 py-1 bg-green-100 text-green-700 rounded text-xs">Back scan</span>' : ''}
                            </div>
                        </div>
                        <div class="flex gap-1">
                            <button onclick="downloadImages('${book.id}')" ${!book.frontImage && !book.backImage ? 'disabled' : ''} class="p-2 border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50">
                                <i data-lucide="download" class="w-4 h-4"></i>
                            </button>
                            <button onclick="editBook('${book.id}')" class="p-2 border border-gray-300 rounded hover:bg-gray-50">
                                <i data-lucide="eye" class="w-4 h-4"></i>
                            </button>
                            <button onclick="deleteBook('${book.id}')" class="p-2 border border-gray-300 rounded hover:bg-gray-50">
                                <i data-lucide="trash-2" class="w-4 h-4"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');

            // Re-initialize Lucide icons for new content
            lucide.createIcons();
        }

        function updateBookCount() {
            document.getElementById('bookCount').textContent = `${books.length} books scanned`;
        }

        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast ${type === 'error' ? 'error' : ''}`;
            toast.textContent = message;
            
            document.getElementById('toastContainer').appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }
    </script>
</body>
</html>
